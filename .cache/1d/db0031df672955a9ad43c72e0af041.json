{"id":"node_modules/kafkajs/src/protocol/messageSet/index.js","dependencies":[{"name":"/var/www/html/bus-booking-prototype/package.json","includedInParent":true,"mtime":1614451123288},{"name":"/var/www/html/bus-booking-prototype/node_modules/kafkajs/package.json","includedInParent":true,"mtime":499162500000},{"name":"../encoder","loc":{"line":1,"column":24},"parent":"/var/www/html/bus-booking-prototype/node_modules/kafkajs/src/protocol/messageSet/index.js","resolved":"/var/www/html/bus-booking-prototype/node_modules/kafkajs/src/protocol/encoder.js"},{"name":"../message","loc":{"line":2,"column":32},"parent":"/var/www/html/bus-booking-prototype/node_modules/kafkajs/src/protocol/messageSet/index.js","resolved":"/var/www/html/bus-booking-prototype/node_modules/kafkajs/src/protocol/message/index.js"},{"name":"../message/compression","loc":{"line":3,"column":26},"parent":"/var/www/html/bus-booking-prototype/node_modules/kafkajs/src/protocol/messageSet/index.js","resolved":"/var/www/html/bus-booking-prototype/node_modules/kafkajs/src/protocol/message/compression/index.js"}],"generated":{"js":"var Encoder = require('../encoder');\n\nvar MessageProtocol = require('../message');\n\nvar _require = require('../message/compression'),\n    Types = _require.Types;\n/**\n * MessageSet => [Offset MessageSize Message]\n *  Offset => int64\n *  MessageSize => int32\n *  Message => Bytes\n */\n\n/**\n * [\n *   { key: \"<value>\", value: \"<value>\" },\n *   { key: \"<value>\", value: \"<value>\" },\n * ]\n */\n\n\nmodule.exports = function (_ref) {\n  var _ref$messageVersion = _ref.messageVersion,\n      messageVersion = _ref$messageVersion === void 0 ? 0 : _ref$messageVersion,\n      compression = _ref.compression,\n      entries = _ref.entries;\n  var isCompressed = compression !== Types.None;\n  var Message = MessageProtocol({\n    version: messageVersion\n  });\n  var encoder = new Encoder(); // Messages in a message set are __not__ encoded as an array.\n  // They are written in sequence.\n  // https://cwiki.apache.org/confluence/display/KAFKA/A+Guide+To+The+Kafka+Protocol#AGuideToTheKafkaProtocol-Messagesets\n\n  entries.forEach(function (entry, i) {\n    var message = Message(entry); // This is the offset used in kafka as the log sequence number.\n    // When the producer is sending non compressed messages, it can set the offsets to anything\n    // When the producer is sending compressed messages, to avoid server side recompression, each compressed message\n    // should have offset starting from 0 and increasing by one for each inner message in the compressed message\n\n    encoder.writeInt64(isCompressed ? i : -1);\n    encoder.writeInt32(message.size());\n    encoder.writeEncoder(message);\n  });\n  return encoder;\n};"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":1,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":1,"column":0}},{"name":"Encoder","generated":{"line":1,"column":4},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":1,"column":6}},{"generated":{"line":1,"column":11},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":1,"column":13}},{"name":"require","generated":{"line":1,"column":14},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":1,"column":16}},{"generated":{"line":1,"column":21},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":1,"column":23}},{"generated":{"line":1,"column":22},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":1,"column":24}},{"generated":{"line":1,"column":34},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":1,"column":23}},{"generated":{"line":1,"column":35},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":1,"column":0}},{"generated":{"line":3,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":2,"column":0}},{"name":"MessageProtocol","generated":{"line":3,"column":4},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":2,"column":6}},{"generated":{"line":3,"column":19},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":2,"column":21}},{"name":"require","generated":{"line":3,"column":22},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":2,"column":24}},{"generated":{"line":3,"column":29},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":2,"column":31}},{"generated":{"line":3,"column":30},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":2,"column":32}},{"generated":{"line":3,"column":42},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":2,"column":31}},{"generated":{"line":3,"column":43},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":2,"column":0}},{"name":"require","generated":{"line":5,"column":15},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":3,"column":18}},{"generated":{"line":5,"column":22},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":3,"column":25}},{"generated":{"line":5,"column":23},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":3,"column":26}},{"generated":{"line":5,"column":47},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":3,"column":25}},{"name":"Types","generated":{"line":6,"column":4},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":3,"column":8}},{"name":"Types","generated":{"line":6,"column":21},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":3,"column":8}},{"generated":{"line":7,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":5,"column":0}},{"generated":{"line":8,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":6,"column":0}},{"generated":{"line":9,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":7,"column":0}},{"generated":{"line":10,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":8,"column":0}},{"generated":{"line":11,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":9,"column":0}},{"generated":{"line":12,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":10,"column":0}},{"generated":{"line":14,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":12,"column":0}},{"generated":{"line":15,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":13,"column":0}},{"generated":{"line":16,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":14,"column":0}},{"generated":{"line":17,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":15,"column":0}},{"generated":{"line":18,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":16,"column":0}},{"generated":{"line":19,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":17,"column":0}},{"name":"module","generated":{"line":22,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":0}},{"generated":{"line":22,"column":6},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":6}},{"name":"exports","generated":{"line":22,"column":7},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":7}},{"generated":{"line":22,"column":14},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":0}},{"generated":{"line":22,"column":17},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":17}},{"generated":{"line":22,"column":33},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":67}},{"generated":{"line":23,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":67}},{"name":"messageVersion","generated":{"line":23,"column":33},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":20}},{"generated":{"line":23,"column":47},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":67}},{"generated":{"line":24,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":67}},{"name":"messageVersion","generated":{"line":24,"column":6},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":20}},{"generated":{"line":24,"column":20},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":67}},{"generated":{"line":24,"column":56},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":37}},{"generated":{"line":24,"column":57},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":67}},{"generated":{"line":25,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":67}},{"name":"compression","generated":{"line":25,"column":6},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":40}},{"generated":{"line":25,"column":17},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":67}},{"name":"compression","generated":{"line":25,"column":25},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":40}},{"generated":{"line":25,"column":36},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":67}},{"generated":{"line":26,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":67}},{"name":"entries","generated":{"line":26,"column":6},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":53}},{"generated":{"line":26,"column":13},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":67}},{"name":"entries","generated":{"line":26,"column":21},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":53}},{"generated":{"line":26,"column":28},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":67}},{"generated":{"line":27,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":19,"column":2}},{"name":"isCompressed","generated":{"line":27,"column":6},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":19,"column":8}},{"generated":{"line":27,"column":18},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":19,"column":20}},{"name":"compression","generated":{"line":27,"column":21},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":19,"column":23}},{"generated":{"line":27,"column":32},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":19,"column":34}},{"name":"Types","generated":{"line":27,"column":37},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":19,"column":39}},{"generated":{"line":27,"column":42},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":19,"column":44}},{"name":"None","generated":{"line":27,"column":43},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":19,"column":45}},{"generated":{"line":27,"column":47},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":19,"column":2}},{"generated":{"line":28,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":20,"column":2}},{"name":"Message","generated":{"line":28,"column":6},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":20,"column":8}},{"generated":{"line":28,"column":13},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":20,"column":15}},{"name":"MessageProtocol","generated":{"line":28,"column":16},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":20,"column":18}},{"generated":{"line":28,"column":31},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":20,"column":33}},{"generated":{"line":28,"column":32},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":20,"column":34}},{"name":"version","generated":{"line":29,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":20,"column":36}},{"name":"version","generated":{"line":29,"column":4},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":20,"column":36}},{"generated":{"line":29,"column":11},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":20,"column":43}},{"name":"messageVersion","generated":{"line":29,"column":13},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":20,"column":45}},{"generated":{"line":30,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":20,"column":34}},{"generated":{"line":30,"column":3},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":20,"column":33}},{"generated":{"line":30,"column":4},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":20,"column":2}},{"generated":{"line":31,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":21,"column":2}},{"name":"encoder","generated":{"line":31,"column":6},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":21,"column":8}},{"generated":{"line":31,"column":13},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":21,"column":15}},{"generated":{"line":31,"column":16},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":21,"column":18}},{"name":"Encoder","generated":{"line":31,"column":20},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":21,"column":22}},{"generated":{"line":31,"column":27},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":21,"column":18}},{"generated":{"line":31,"column":29},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":21,"column":2}},{"generated":{"line":31,"column":30},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":67}},{"generated":{"line":31,"column":31},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":23,"column":2}},{"generated":{"line":32,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":24,"column":2}},{"generated":{"line":33,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":25,"column":2}},{"name":"entries","generated":{"line":35,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":27,"column":2}},{"name":"entries","generated":{"line":35,"column":2},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":27,"column":2}},{"generated":{"line":35,"column":9},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":27,"column":9}},{"name":"forEach","generated":{"line":35,"column":10},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":27,"column":10}},{"generated":{"line":35,"column":17},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":27,"column":2}},{"generated":{"line":35,"column":18},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":27,"column":18}},{"name":"entry","generated":{"line":35,"column":28},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":27,"column":19}},{"generated":{"line":35,"column":33},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":27,"column":18}},{"name":"i","generated":{"line":35,"column":35},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":27,"column":26}},{"generated":{"line":35,"column":36},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":27,"column":18}},{"generated":{"line":35,"column":38},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":27,"column":32}},{"generated":{"line":36,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":28,"column":4}},{"name":"message","generated":{"line":36,"column":8},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":28,"column":10}},{"generated":{"line":36,"column":15},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":28,"column":17}},{"name":"Message","generated":{"line":36,"column":18},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":28,"column":20}},{"generated":{"line":36,"column":25},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":28,"column":27}},{"name":"entry","generated":{"line":36,"column":26},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":28,"column":28}},{"generated":{"line":36,"column":31},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":28,"column":27}},{"generated":{"line":36,"column":32},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":28,"column":4}},{"generated":{"line":36,"column":33},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":27,"column":32}},{"generated":{"line":36,"column":34},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":30,"column":4}},{"generated":{"line":37,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":31,"column":4}},{"generated":{"line":38,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":32,"column":4}},{"generated":{"line":39,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":33,"column":4}},{"name":"encoder","generated":{"line":41,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":34,"column":4}},{"name":"encoder","generated":{"line":41,"column":4},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":34,"column":4}},{"generated":{"line":41,"column":11},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":34,"column":11}},{"name":"writeInt64","generated":{"line":41,"column":12},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":34,"column":12}},{"generated":{"line":41,"column":22},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":34,"column":4}},{"name":"isCompressed","generated":{"line":41,"column":23},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":34,"column":23}},{"generated":{"line":41,"column":35},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":34,"column":35}},{"name":"i","generated":{"line":41,"column":38},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":34,"column":38}},{"generated":{"line":41,"column":39},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":34,"column":35}},{"generated":{"line":41,"column":42},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":34,"column":42}},{"generated":{"line":41,"column":43},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":34,"column":43}},{"generated":{"line":41,"column":44},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":34,"column":4}},{"name":"encoder","generated":{"line":42,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":35,"column":4}},{"name":"encoder","generated":{"line":42,"column":4},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":35,"column":4}},{"generated":{"line":42,"column":11},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":35,"column":11}},{"name":"writeInt32","generated":{"line":42,"column":12},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":35,"column":12}},{"generated":{"line":42,"column":22},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":35,"column":4}},{"name":"message","generated":{"line":42,"column":23},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":35,"column":23}},{"generated":{"line":42,"column":30},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":35,"column":30}},{"name":"size","generated":{"line":42,"column":31},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":35,"column":31}},{"generated":{"line":42,"column":35},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":35,"column":23}},{"generated":{"line":42,"column":37},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":35,"column":4}},{"name":"encoder","generated":{"line":43,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":37,"column":4}},{"name":"encoder","generated":{"line":43,"column":4},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":37,"column":4}},{"generated":{"line":43,"column":11},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":37,"column":11}},{"name":"writeEncoder","generated":{"line":43,"column":12},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":37,"column":12}},{"generated":{"line":43,"column":24},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":37,"column":4}},{"name":"message","generated":{"line":43,"column":25},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":37,"column":25}},{"generated":{"line":43,"column":32},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":37,"column":4}},{"generated":{"line":44,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":38,"column":3}},{"generated":{"line":44,"column":3},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":27,"column":2}},{"generated":{"line":45,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":40,"column":2}},{"name":"encoder","generated":{"line":45,"column":9},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":40,"column":9}},{"generated":{"line":45,"column":16},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":40,"column":2}},{"generated":{"line":46,"column":0},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":41,"column":1}},{"generated":{"line":46,"column":1},"source":"node_modules/kafkajs/src/protocol/messageSet/index.js","original":{"line":18,"column":0}}],"sources":{"node_modules/kafkajs/src/protocol/messageSet/index.js":"const Encoder = require('../encoder')\nconst MessageProtocol = require('../message')\nconst { Types } = require('../message/compression')\n\n/**\n * MessageSet => [Offset MessageSize Message]\n *  Offset => int64\n *  MessageSize => int32\n *  Message => Bytes\n */\n\n/**\n * [\n *   { key: \"<value>\", value: \"<value>\" },\n *   { key: \"<value>\", value: \"<value>\" },\n * ]\n */\nmodule.exports = ({ messageVersion = 0, compression, entries }) => {\n  const isCompressed = compression !== Types.None\n  const Message = MessageProtocol({ version: messageVersion })\n  const encoder = new Encoder()\n\n  // Messages in a message set are __not__ encoded as an array.\n  // They are written in sequence.\n  // https://cwiki.apache.org/confluence/display/KAFKA/A+Guide+To+The+Kafka+Protocol#AGuideToTheKafkaProtocol-Messagesets\n\n  entries.forEach((entry, i) => {\n    const message = Message(entry)\n\n    // This is the offset used in kafka as the log sequence number.\n    // When the producer is sending non compressed messages, it can set the offsets to anything\n    // When the producer is sending compressed messages, to avoid server side recompression, each compressed message\n    // should have offset starting from 0 and increasing by one for each inner message in the compressed message\n    encoder.writeInt64(isCompressed ? i : -1)\n    encoder.writeInt32(message.size())\n\n    encoder.writeEncoder(message)\n  })\n\n  return encoder\n}\n"},"lineCount":null}},"error":null,"hash":"b29c99d3a580d2fb9228dc3a34451d5f","cacheData":{"env":{}}}